<% if flash[:notice].present? %>
  <%= flash[:notice] %>
<% end %>
</br>

<table>
  <tr>
    <td> Title </td>
    <td> Body </td>
    <td> Category </td>
    <td> Action </td>
  </tr>

  <% @posts.each do |post| %>

  <tr>
    <td><%= post.title %></td>
    <td><%= truncate(strip_tags(post.body.to_s), length: 160) %></td>
    <% array = [] %>
    <% post.categories.each do |category| %>
      <% array << category.name %>
    <% end %>
    <td><%= array.join(', ') %></td>
    <td><%= link_to 'Detail', post_path(post) %> |
        <%= link_to 'Edit', edit_post_path(post) %> |
        <%= link_to 'Delete', post_path(post), method: :delete, data: {confirm: "Are you sure?"} %> </td>
  </tr>
  <%end%>

  <tr>
    <td><%= link_to 'New Post', new_post_path %></td>
  </tr>
</table>
